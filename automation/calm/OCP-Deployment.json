{"status":{},"contains_secrets":false,"product_version":"3.3.1.1","spec":{"description":"","resources":{"client_attrs":{"None":{"y":-1003.6204814397,"x":360.2091299849},"4aff8c30_deployment":{"y":-1149.3387822732,"x":-79.1430905227},"9df14f84_deployment":{"y":-1025.0253049295,"x":62.3927575272},"decb8265_deployment":{"y":-1113.616780016,"x":259.4503962294},"8ff9c0f1_deployment":{"y":-851.2293601223,"x":70.7502005666},"d9d0f80c_deployment":{"y":-832.7494120892,"x":260.4250133474}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Bootstrap"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"3b8701f6_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"244932b5_runbook","main_task_local_reference":{"kind":"app_task","name":"3b8701f6_dag"},"variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"CHECK_VAR","value":"@@{Openshift_LB_DNS.LB_DNS_STATUS}@@","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Bootstrap"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Delete DNS Entry"}],"name":"3fddfa76_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Bootstrap"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Delete DNS Entry","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"a7246c3d_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"3b982661_runbook","main_task_local_reference":{"kind":"app_task","name":"3fddfa76_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Bootstrap"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"267fcd78_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"292034ce_runbook","main_task_local_reference":{"kind":"app_task","name":"267fcd78_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Bootstrap"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"5c64d685_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"4fcf4ddc_runbook","main_task_local_reference":{"kind":"app_task","name":"5c64d685_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Bootstrap"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"cb5d5768_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"06ce90e3_runbook","main_task_local_reference":{"kind":"app_task","name":"cb5d5768_dag"},"variable_list":[]},"name":"action_restart"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Get LB Address"},{"kind":"app_task","name":"Register Bootstrap into LoadBalancer"}],"name":"1aab1578_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Get LB Address"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Register Bootstrap into LoadBalancer"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Bootstrap"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Get LB Address","attrs":{"exit_status":[],"script":"print \"LB_TARGET=@@{LB_DNS.address}@@\"","eval_variables":["LB_TARGET"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Bootstrap"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Register Bootstrap into LoadBalancer","attrs":{"script":"echo \"set server machine-config-server\/bootstrap addr @@{address}@@\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999\necho \"set server machine-config-server\/bootstrap state ready\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999\n\necho \"set server openshift-api-server\/bootstrap addr @@{address}@@\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999\necho \"set server openshift-api-server\/bootstrap state ready\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999\n","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"e8e1548e_runbook","main_task_local_reference":{"kind":"app_task","name":"1aab1578_dag"},"variable_list":[]},"name":"Register Bootstrap into LoadBalancer"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Create DNS Entry"}],"name":"80422709_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Bootstrap"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Create DNS Entry","attrs":{"script":"## Configure ssh agent\nSSH_CRED=\"@@{CRED.secret}@@\"\neval `ssh-agent -s`\nssh-add - <<<\"${SSH_CRED}\"\n\n## Update DNS zones and LB config for Bootstrap ###\nssh core@@@{LB_DNS.address}@@ -o StrictHostKeyChecking=no -o UserKnownHostsFile=\/dev\/null << EOF\necho \"@@{address}@@ bootstrap.@@{OPENSHIFT_SUBDOMAIN}@@.@@{BASE_DOMAIN}@@\" | sudo tee -a \/etc\/hosts\nsudo systemctl restart dnsmasq\nEOF","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"88af57fe_runbook","main_task_local_reference":{"kind":"app_task","name":"80422709_dag"},"variable_list":[]},"name":"Create DNS Entry"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"86ab36cf_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"a7246c3d_runbook","main_task_local_reference":{"kind":"app_task","name":"86ab36cf_dag"},"variable_list":[]},"name":"Delete DNS Entry"}],"depends_on_list":[],"name":"Bootstrap","port_list":[],"tier":"","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"BOOTSTRAP_STATUS","value":"","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"LB_TARGET","value":"","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"68f2a41b_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"afc7eb2c_runbook","main_task_local_reference":{"kind":"app_task","name":"68f2a41b_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Master"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Delete DNS Entry"},{"kind":"app_task","name":"Remove Master from LoadBalancer"}],"name":"6a320be2_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Delete DNS Entry"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Remove Master from LoadBalancer"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Delete DNS Entry","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"6b1ca7a2_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Remove Master from LoadBalancer","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"a0c79988_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"d8410e81_runbook","main_task_local_reference":{"kind":"app_task","name":"6a320be2_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"8826904c_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"ddbfb95a_runbook","main_task_local_reference":{"kind":"app_task","name":"8826904c_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"569d8b62_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"44394b32_runbook","main_task_local_reference":{"kind":"app_task","name":"569d8b62_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"46a1155f_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"bd4aacc4_runbook","main_task_local_reference":{"kind":"app_task","name":"46a1155f_dag"},"variable_list":[]},"name":"action_restart"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Get LB Address"},{"kind":"app_task","name":"Register Master into LoadBalancer"}],"name":"bfde03b9_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Get LB Address"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Register Master into LoadBalancer"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Get LB Address","attrs":{"exit_status":[],"script":"print \"LB_TARGET=@@{LB_DNS.address}@@\"","eval_variables":["LB_TARGET"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Register Master into LoadBalancer","attrs":{"script":"echo \"set server machine-config-server\/master@@{calm_array_index}@@ addr @@{address}@@\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999\necho \"set server machine-config-server\/master@@{calm_array_index}@@ state ready\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999\n\necho \"set server openshift-api-server\/master@@{calm_array_index}@@ addr @@{address}@@\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999\necho \"set server openshift-api-server\/master@@{calm_array_index}@@ state ready\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"d9221bb7_runbook","main_task_local_reference":{"kind":"app_task","name":"bfde03b9_dag"},"variable_list":[]},"name":"Register Master into LoadBalancer"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Remove Master from LoadBalancer"}],"name":"e518a5f5_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Remove Master from LoadBalancer","attrs":{"script":"echo \"set server machine-config-server\/master@@{calm_array_index}@@ state maint\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999\n\necho \"set server openshift-api-server\/master@@{calm_array_index}@@ state maint\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"a0c79988_runbook","main_task_local_reference":{"kind":"app_task","name":"e518a5f5_dag"},"variable_list":[]},"name":"Remove Master from LoadBalancer"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Create DNS Entry"}],"name":"8bcf7e22_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Create DNS Entry","attrs":{"script":"## Configure ssh agent\nSSH_CRED=\"@@{CRED.secret}@@\"\neval `ssh-agent -s`\nssh-add - <<<\"${SSH_CRED}\"\n\n## Update DNS zones and LB config for Bootstrap ###\nssh core@@@{LB_DNS.address}@@ -o StrictHostKeyChecking=no -o UserKnownHostsFile=\/dev\/null << EOF\necho \"@@{address}@@ master-@@{calm_array_index}@@.@@{OPENSHIFT_SUBDOMAIN}@@.@@{BASE_DOMAIN}@@\" | sudo tee -a \/etc\/hosts\nsudo systemctl restart dnsmasq\nEOF","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"5e78714b_runbook","main_task_local_reference":{"kind":"app_task","name":"8bcf7e22_dag"},"variable_list":[]},"name":"Create DNS Entry"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Delete DNS Entry"}],"name":"3ec572c9_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Delete DNS Entry","attrs":{"script":"## Update DNS zones and LB config\nssh core@@@{LB_TARGET}@@ -o StrictHostKeyChecking=no -o UserKnownHostsFile=\/dev\/null << EOF\nsudo sed -i '\/master-@@{calm_array_index}@@\/d' \/etc\/hosts\nsudo systemctl restart dnsmasq\nEOF","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"6b1ca7a2_runbook","main_task_local_reference":{"kind":"app_task","name":"3ec572c9_dag"},"variable_list":[]},"name":"Delete DNS Entry"}],"depends_on_list":[],"name":"Master","port_list":[],"tier":"","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"MASTER_STATUS","value":"","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"LB_TARGET","value":"","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"LB_DNS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"df22df50_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"624885aa_runbook","main_task_local_reference":{"kind":"app_task","name":"df22df50_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"LB_DNS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"b6b8e7f8_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"c624baa4_runbook","main_task_local_reference":{"kind":"app_task","name":"b6b8e7f8_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"LB_DNS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"afbe47d3_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"634da80b_runbook","main_task_local_reference":{"kind":"app_task","name":"afbe47d3_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"LB_DNS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"c1e710f3_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"c5e9be4b_runbook","main_task_local_reference":{"kind":"app_task","name":"c1e710f3_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"LB_DNS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"e9f29ce8_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"84dbf71c_runbook","main_task_local_reference":{"kind":"app_task","name":"e9f29ce8_dag"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[],"name":"LB_DNS","port_list":[],"tier":"","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"ST","value":"","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"AUTH","value":"","label":"","attrs":{"type":"LOCAL"},"editables":{"value":false},"is_hidden":true,"options":{"type":"PREDEFINED","choices":[]}}],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"OS_Status_Check"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"c465827e_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"96b11ed4_runbook","main_task_local_reference":{"kind":"app_task","name":"c465827e_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"OS_Status_Check"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"168fff19_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"27198955_runbook","main_task_local_reference":{"kind":"app_task","name":"168fff19_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"OS_Status_Check"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Show Login Information"}],"name":"c516d21c_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"OS_Status_Check"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Show Login Information","attrs":{"script":"print \"Installation completed\"\nprint \"For logging into Console please use the following URL:\"\nprint \"https:\/\/console-openshift-console.apps.{}.{}\".format('@@{OPENSHIFT_SUBDOMAIN}@@','@@{BASE_DOMAIN}@@')\nprint \"Credentials: kubeadmin \/ @@{LB_DNS.AUTH}@@\"\nprint \"For CLI access you can also connect to LB_DNS-Console.\"\nprint \"Please run 'export KUBECONFIG=~\/openshift\/auth\/kubeconfig' before using OC CLI Tool\"","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"15c8346b_runbook","main_task_local_reference":{"kind":"app_task","name":"c516d21c_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"OS_Status_Check"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"715f1ce2_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"afe012b6_runbook","main_task_local_reference":{"kind":"app_task","name":"715f1ce2_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"OS_Status_Check"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"97a5f3ca_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"0b751606_runbook","main_task_local_reference":{"kind":"app_task","name":"97a5f3ca_dag"},"variable_list":[]},"name":"action_restart"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Remove Bootstrap from LoadBalancer"}],"name":"0dca6f09_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"OS_Status_Check"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Remove Bootstrap from LoadBalancer","attrs":{"script":"echo \"set server machine-config-server\/bootstrap state maint\" | socat stdio tcp4-connect:@@{LB_DNS.address}@@:9999\necho \"set server openshift-api-server\/bootstrap state maint\" | socat stdio tcp4-connect:@@{LB_DNS.address}@@:9999\n","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"a9b5306a_runbook","main_task_local_reference":{"kind":"app_task","name":"0dca6f09_dag"},"variable_list":[]},"name":"Remove Bootstrap from LoadBalancer"}],"depends_on_list":[],"name":"OS_Status_Check","port_list":[],"tier":"","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"OCP_STATUS","value":"","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"OCP_PREPARE","value":"","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"68f2a41b_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"afc7eb2c_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"68f2a41b_dag_cloned_1"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Worker"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Delete DNS Entry"},{"kind":"app_task","name":"Remove Worker from LoadBalancer"}],"name":"6a320be2_dag_cloned_1","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Delete DNS Entry"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Remove Worker from LoadBalancer"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Delete DNS Entry","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"f926d7b3_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Remove Worker from LoadBalancer","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"f27499fb_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"d8410e81_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"6a320be2_dag_cloned_1"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"8826904c_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"ddbfb95a_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"8826904c_dag_cloned_1"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"569d8b62_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"44394b32_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"569d8b62_dag_cloned_1"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"46a1155f_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"bd4aacc4_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"46a1155f_dag_cloned_1"},"variable_list":[]},"name":"action_restart"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Get LB Address"},{"kind":"app_task","name":"Register Worker into LoadBalancer"}],"name":"4faf2699_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Get LB Address"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Register Worker into LoadBalancer"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Get LB Address","attrs":{"exit_status":[],"script":"print \"LB_TARGET=@@{LB_DNS.address}@@\"","eval_variables":["LB_TARGET"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Register Worker into LoadBalancer","attrs":{"script":"echo \"set server ingress-http\/worker@@{calm_array_index}@@ addr @@{address}@@\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999\necho \"set server ingress-http\/worker@@{calm_array_index}@@ state ready\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999\n\necho \"set server ingress-https\/worker@@{calm_array_index}@@ addr @@{address}@@\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999\necho \"set server ingress-https\/worker@@{calm_array_index}@@ state ready\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"bd1a1b17_runbook","main_task_local_reference":{"kind":"app_task","name":"4faf2699_dag"},"variable_list":[]},"name":"Register Worker into LoadBalancer"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Remove Worker from LoadBalancer"}],"name":"8d175b65_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Remove Worker from LoadBalancer","attrs":{"script":"echo \"set server ingress-http\/worker@@{calm_array_index}@@ state maint\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999\n\necho \"set server ingress-https\/worker@@{calm_array_index}@@ state maint\" | socat stdio tcp4-connect:@@{LB_TARGET}@@:9999","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"f27499fb_runbook","main_task_local_reference":{"kind":"app_task","name":"8d175b65_dag"},"variable_list":[]},"name":"Remove Worker from LoadBalancer"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Create DNS Entry"}],"name":"f479d3a0_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Create DNS Entry","attrs":{"script":"## Configure ssh agent\nSSH_CRED=\"@@{CRED.secret}@@\"\neval `ssh-agent -s`\nssh-add - <<<\"${SSH_CRED}\"\n\n## Update DNS zones and LB config for Bootstrap ###\nssh core@@@{LB_DNS.address}@@ -o StrictHostKeyChecking=no -o UserKnownHostsFile=\/dev\/null << EOF\necho \"@@{address}@@ worker-@@{calm_array_index}@@.@@{OPENSHIFT_SUBDOMAIN}@@.@@{BASE_DOMAIN}@@\" | sudo tee -a \/etc\/hosts\nsudo systemctl restart dnsmasq\nEOF","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"57e200d4_runbook","main_task_local_reference":{"kind":"app_task","name":"f479d3a0_dag"},"variable_list":[]},"name":"Create DNS Entry"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Delete DNS Entry"}],"name":"36091e6e_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Delete DNS Entry","attrs":{"script":"## Update DNS zones and LB config\nssh core@@@{LB_TARGET}@@ -o StrictHostKeyChecking=no -o UserKnownHostsFile=\/dev\/null << EOF\nsudo sed -i '\/worker-@@{calm_array_index}@@\/d' \/etc\/hosts\nsudo systemctl restart dnsmasq\nEOF","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"f926d7b3_runbook","main_task_local_reference":{"kind":"app_task","name":"36091e6e_dag"},"variable_list":[]},"name":"Delete DNS Entry"}],"depends_on_list":[],"name":"Worker","port_list":[],"tier":"","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"WORKER_STATUS","value":"","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"LB_TARGET","value":"","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}],"description":""}],"substrate_definition_list":[{"description":"","action_list":[{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"bootstrap"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Wait for prepared Env"}],"name":"468d993e_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_substrate","name":"bootstrap"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Wait for prepared Env","attrs":{"script":"print \"@@{OS_Status_Check.OCP_PREPARE}@@\"","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"13835fd4_runbook","main_task_local_reference":{"kind":"app_task","name":"468d993e_dag"},"variable_list":[]},"name":"pre_action_create"},{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"bootstrap"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"12f3c182_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"89355d8f_runbook","main_task_local_reference":{"kind":"app_task","name":"12f3c182_dag"},"variable_list":[]},"name":"post_action_delete"}],"type":"AHV_VM","name":"bootstrap","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"CRED"}},"editables":{"readiness_probe":{"retries":true,"delay_secs":true,"timeout_secs":null},"create_spec":{"resources":{"nic_list":{"0":{"subnet_reference":true}}}}},"os_type":"Linux","create_spec":{"name":"Bootstrap-@@{calm_array_index}@@-@@{calm_time}@@-@@{LB_DNS.ST}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"13d23328-4932-47f6-bd13-2e5fe1fcd490"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"gpu_list":[],"memory_size_mib":16384,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"{\n  \"ignition\": {\n    \"version\": \"3.0.0\",\n    \"config\": {\n      \"replace\": {\n        \"source\": \"http:\/\/@@{LB_DNS.address}@@:8080\/openshift\/bootstrap.ign\"\n      }\n    }\n  }\n}"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"40630a9c-fa6d-4613-b6cb-7f800fb4c97b","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","type":"","name":"rhcos","uuid":"fde5a500-cd1e-420d-885d-22e7260675bf"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]},{"description":"","action_list":[{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"master"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Wait for Bootstrap"}],"name":"44e5df8c_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_substrate","name":"master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Wait for Bootstrap","attrs":{"script":"print \"@@{OS_Status_Check.OCP_PREPARE}@@\"","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"42f1914a_runbook","main_task_local_reference":{"kind":"app_task","name":"44e5df8c_dag"},"variable_list":[]},"name":"pre_action_create"},{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"a5d879f9_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"36e159ad_runbook","main_task_local_reference":{"kind":"app_task","name":"a5d879f9_dag"},"variable_list":[]},"name":"post_action_delete"}],"type":"AHV_VM","name":"master","readiness_probe":{"connection_type":"SSH","retries":"60","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"30","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"CRED"}},"editables":{"readiness_probe":{"retries":true,"delay_secs":true,"timeout_secs":null},"create_spec":{"resources":{"nic_list":{"0":{"subnet_reference":true}}}}},"os_type":"Linux","create_spec":{"name":"master-@@{calm_array_index}@@-@@{calm_time}@@-@@{LB_DNS.ST}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"13d23328-4932-47f6-bd13-2e5fe1fcd490"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"gpu_list":[],"memory_size_mib":16384,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"{\n  \"ignition\": {\n    \"version\": \"3.0.0\",\n    \"config\": {\n      \"replace\": {\n        \"source\": \"http:\/\/@@{LB_DNS.address}@@:8080\/openshift\/master.ign\"\n      }\n    }\n  }\n}"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"40630a9c-fa6d-4613-b6cb-7f800fb4c97b","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"LEGACY","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","type":"","name":"rhcos","uuid":"fde5a500-cd1e-420d-885d-22e7260675bf"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]},{"description":"","action_list":[{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"lb_dns"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"8e2557a0_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"34748339_runbook","main_task_local_reference":{"kind":"app_task","name":"8e2557a0_dag"},"variable_list":[]},"name":"pre_action_create"},{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"lb_dns"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"77be263b_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"86ea7a14_runbook","main_task_local_reference":{"kind":"app_task","name":"77be263b_dag"},"variable_list":[]},"name":"post_action_delete"}],"type":"AHV_VM","name":"lb_dns","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"30","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"CRED"}},"editables":{"create_spec":{"resources":{"guest_customization":true,"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true}}},"os_type":"Linux","create_spec":{"name":"lbdns-@@{OPENSHIFT_SUBDOMAIN}@@-@@{calm_time}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[{"ip":"@@{BASTION_IP}@@","type":"ASSIGNED"}],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"13d23328-4932-47f6-bd13-2e5fe1fcd490"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"gpu_list":[],"memory_size_mib":6144,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nusers:\n  - name: @@{CRED.username}@@\n    ssh-authorized-keys:\n      - @@{CRED.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"40630a9c-fa6d-4613-b6cb-7f800fb4c97b","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"LEGACY","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","type":"","name":"OpenshiftC8Stream","uuid":"991c6d93-63a4-4595-b505-8c98d511d4a6"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]},{"description":"","action_list":[],"type":"EXISTING_VM","name":"Prov_Check","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{lb_dns.address}@@","delay_secs":"30","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"CRED"}},"os_type":"Linux","create_spec":{"type":"PROVISION_EXISTING_MACHINE","address":"@@{lb_dns.address}@@"},"variable_list":[]},{"description":"","action_list":[{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"worker"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Wait for Bootstrap Process"}],"name":"82055624_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_substrate","name":"worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Wait for Bootstrap Process","attrs":{"script":"print \"@@{Bootstrap.BOOTSTRAP_STATUS}@@\"","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"01ba9557_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"82055624_dag_cloned_1"},"variable_list":[]},"name":"pre_action_create"},{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"7fde6a8e_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"797b9168_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"7fde6a8e_dag_cloned_1"},"variable_list":[]},"name":"post_action_delete"}],"type":"AHV_VM","name":"worker","readiness_probe":{"connection_type":"SSH","retries":"60","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"30","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"CRED"}},"editables":{"readiness_probe":{"retries":true,"delay_secs":true,"timeout_secs":null},"create_spec":{"resources":{"nic_list":{"0":{"subnet_reference":true}}}}},"os_type":"Linux","create_spec":{"name":"worker-@@{calm_array_index}@@-@@{calm_time}@@-@@{LB_DNS.ST}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"13d23328-4932-47f6-bd13-2e5fe1fcd490"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":4,"gpu_list":[],"memory_size_mib":16384,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"{\n  \"ignition\": {\n    \"version\": \"3.0.0\",\n    \"config\": {\n      \"replace\": {\n        \"source\": \"http:\/\/@@{LB_DNS.address}@@:8080\/openshift\/worker.ign\"\n      }\n    }\n  }\n}"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"40630a9c-fa6d-4613-b6cb-7f800fb4c97b","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"LEGACY","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","type":"","name":"rhcos","uuid":"fde5a500-cd1e-420d-885d-22e7260675bf"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]}],"credential_definition_list":[{"username":"core","description":"","type":"KEY","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"CRED","editables":{"secret":true},"cred_class":"static"}],"package_definition_list":[{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Bootstrap"}],"name":"Setup","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Setup"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Create DNS Entry"},{"kind":"app_task","name":"Register Bootstrap into LoadBalancer"},{"kind":"app_task","name":"Status"}],"name":"5707bf52_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Create DNS Entry"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Register Bootstrap into LoadBalancer"}},{"from_task_reference":{"kind":"app_task","name":"Register Bootstrap into LoadBalancer"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Status"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Bootstrap"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Create DNS Entry","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"88af57fe_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Bootstrap"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Register Bootstrap into LoadBalancer","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"e8e1548e_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Bootstrap"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Status","attrs":{"exit_status":[],"script":"print 'BOOTSTRAP_STATUS=Done'","eval_variables":["BOOTSTRAP_STATUS"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]}],"description":"","name":"20d21b90_runbook","main_task_local_reference":{"kind":"app_task","name":"5707bf52_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Setup"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"a643dfca_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"24fb9eac_runbook","main_task_local_reference":{"kind":"app_task","name":"a643dfca_dag"},"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"SUBSTRATE_IMAGE","service_local_reference_list":[],"name":"OpenshiftC8Stream","version":"","options":{"type":"","name":"OpenshiftC8Stream","resources":{"image_type":"DISK_IMAGE","checksum":{"checksum_algorithm":"","type":"","checksum_value":""},"source_uri":"https:\/\/cloud.centos.org\/centos\/8-stream\/x86_64\/images\/CentOS-Stream-GenericCloud-8-20220125.1.x86_64.qcow2","version":{"product_version":"1.0.0","type":"","product_name":"Openshift-Centos8Stream"},"architecture":"X86_64","type":""},"description":""},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Master"}],"name":"OS Installation","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"OS Installation"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Create DNS Entry"},{"kind":"app_task","name":"Register Master into LoadBalancer"},{"kind":"app_task","name":"Status"}],"name":"a3bc4919_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Create DNS Entry"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Register Master into LoadBalancer"}},{"from_task_reference":{"kind":"app_task","name":"Register Master into LoadBalancer"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Status"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Create DNS Entry","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"5e78714b_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Register Master into LoadBalancer","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"d9221bb7_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Master"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Status","attrs":{"exit_status":[],"script":"print \"MASTER_STATUS=Done\"","eval_variables":["MASTER_STATUS"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]}],"description":"","name":"e4f956ad_runbook","main_task_local_reference":{"kind":"app_task","name":"a3bc4919_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"OS Installation"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"22442950_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"3cae7b50_runbook","main_task_local_reference":{"kind":"app_task","name":"22442950_dag"},"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"LB_DNS"}],"name":"Openshift LB DNS Setup","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Openshift LB DNS Setup"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Provisioning Setup"},{"kind":"app_task","name":"Haproxy Setup"},{"kind":"app_task","name":"dnsmasq setup"},{"kind":"app_task","name":"Prepare Env"},{"kind":"app_task","name":"Status"},{"kind":"app_task","name":"Get Auth"}],"name":"a68d3d79_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Provisioning Setup"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Haproxy Setup"}},{"from_task_reference":{"kind":"app_task","name":"Prepare Env"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Status"}},{"from_task_reference":{"kind":"app_task","name":"Haproxy Setup"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"dnsmasq setup"}},{"from_task_reference":{"kind":"app_task","name":"dnsmasq setup"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Prepare Env"}},{"from_task_reference":{"kind":"app_task","name":"Status"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Get Auth"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"LB_DNS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Provisioning Setup","attrs":{"script":"#!\/bin\/bash -e\n\n# Disable selinux\nsudo setenforce 0\n\nmkdir -p openshift\ncd openshift\n\nsudo yum -y install jq python3 socat httpd haproxy dnsmasq\n\nsudo sed -i 's\/Listen 80\/Listen 8080\/g' \/etc\/httpd\/conf\/httpd.conf\nsudo systemctl enable httpd\nsudo systemctl start httpd\n\n# Download Openshift installer\ncurl -o openshift-install-linux.tar.gz @@{OPENSHIFT_INSTALL_LINUX}@@\ntar xzf openshift-install-linux.tar.gz\nsudo install -m 755 -o root openshift-install \/sbin\/\n\n\n# Download Openshift client\ncurl -o openshift-client-linux.tar.gz @@{OPENSHIFT_CLIENT_LINUX}@@\ntar xzf openshift-client-linux.tar.gz\nsudo install -m 755 -o root oc \/sbin\/\n\nsudo mkdir -p \/var\/www\/html\/openshift\n\n","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"LB_DNS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Haproxy Setup","attrs":{"script":"#!\/bin\/bash -xe\n\necho \"\"\"#---------------------------------------------------------------------\n# Global settings\n#---------------------------------------------------------------------\nglobal\n\n    log         127.0.0.1 local2\n\n    chroot      \/var\/lib\/haproxy\n    pidfile     \/var\/run\/haproxy.pid\n    maxconn     4000\n    user        haproxy\n    group       haproxy\n    daemon\n\n    # utilize system-wide crypto-policies\n    ssl-default-bind-ciphers PROFILE=SYSTEM\n    ssl-default-server-ciphers PROFILE=SYSTEM\n\n\n    stats socket ipv4@0.0.0.0:9999 level admin\n    stats socket \/var\/run\/haproxy.sock mode 666 level admin\n    stats timeout 2m\n    server-state-file \/usr\/local\/etc\/haproxy\/haproxy.state\n\n#---------------------------------------------------------------------\n# common defaults that all the 'listen' and 'backend' sections will\n# use if not designated in their block\n#---------------------------------------------------------------------\n\ndefaults\n    load-server-state-from-file global\n    mode                    http\n    log                     global\n    option                  httplog\n    option                  dontlognull\n    option http-server-close\n    option forwardfor       except 127.0.0.0\/8\n    option                  redispatch\n    retries                 3\n    timeout http-request    10s\n    timeout queue           1m\n    timeout connect         10s\n    timeout client          1m\n    timeout server          1m\n    timeout http-keep-alive 10s\n    timeout check           10s\n    maxconn                 3000\n\n\n#---------------------------------------------------------------------\n# Openshift config\n#---------------------------------------------------------------------\n\nlisten stats\n    bind :9000\n    mode http\n    stats enable\n    stats uri \/\n    monitor-uri \/healthz\n\n\nfrontend openshift-api-server\n    bind *:6443\n    default_backend openshift-api-server\n    mode tcp\n    option tcplog\n\nbackend openshift-api-server\n    balance source\n    mode tcp\n    server-template master 0-2 1.0.0.1:6443 check disabled\n    server bootstrap 0.0.0.0:6443 check\n\nfrontend machine-config-server\n    bind *:22623\n    default_backend machine-config-server\n    mode tcp\n    option tcplog\n\nbackend machine-config-server\n    balance source\n    mode tcp\n    server-template master 0-2 1.0.0.1:22623 check disabled\n    server bootstrap 0.0.0.0:22623 check\n\nfrontend ingress-http\n    bind *:80\n    default_backend ingress-http\n    mode tcp\n    option tcplog\n\nbackend ingress-http\n    balance source\n    mode tcp\n    server-template worker 0-19 2.0.0.1:80 check disabled\n    server-template master 0-2 2.0.0.1:443 check disabled\n    \nfrontend ingress-https\n    bind *:443\n    default_backend ingress-https\n    mode tcp\n    option tcplog\n\nbackend ingress-https\n    balance source\n    mode tcp\n    server-template worker 0-19 2.0.0.1:443 check disabled\n    server-template master 0-2 2.0.0.1:443 check disabled\n    \"\"\" | sudo tee \/etc\/haproxy\/haproxy.cfg\n\nsudo systemctl enable haproxy\nsudo systemctl start haproxy","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"LB_DNS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"dnsmasq setup","attrs":{"script":"echo \"@@{address}@@ helper.@@{OPENSHIFT_SUBDOMAIN}@@.@@{BASE_DOMAIN}@@\" | sudo tee -a \/etc\/hosts\necho \"@@{address}@@ api.@@{OPENSHIFT_SUBDOMAIN}@@.@@{BASE_DOMAIN}@@\" | sudo tee -a \/etc\/hosts\necho \"@@{address}@@ api-int.@@{OPENSHIFT_SUBDOMAIN}@@.@@{BASE_DOMAIN}@@\" | sudo tee -a \/etc\/hosts\n\necho \"address=\/.apps.@@{OPENSHIFT_SUBDOMAIN}@@.@@{BASE_DOMAIN}@@\/@@{address}@@\" | sudo tee -a \/etc\/dnsmasq.conf \nsudo systemctl enable dnsmasq\nsudo systemctl start dnsmasq\n","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"LB_DNS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Prepare Env","attrs":{"script":"#!\/bin\/bash -e\n\ncd ~\/openshift\n\n# Create ignition config used for generation of ignition files\ncat <<EOF > install-config.yaml\napiVersion: v1\nbaseDomain: @@{BASE_DOMAIN}@@\nmetadata:\n  name: @@{OPENSHIFT_SUBDOMAIN}@@\ncompute:\n-  name: worker # add argument\n   replicas: @@{WORKER}@@\ncontrolPlane:\n  name: master # add argument\n  replicas: 3 # default\nnetworking:\n  clusterNetwork:\n  - cidr: @@{OCP_CLUSTER_NETWORK}@@\n    hostPrefix: @@{OCP_CLUSTER_HOSTPREFIX}@@\n  serviceNetwork:\n   - @@{OCP_SERVICE_NETWORK}@@\n  machineNetwork:\n  - cidr: @@{OCP_MACHINE_NETWORK}@@\nplatform:\n  none: {}\npullSecret: '@@{OCP_PULL_SECRET}@@'\nsshKey: \"@@{CRED.public_key}@@\"\nEOF\n\n# Ignition file generation\n# This will generate bootstrap.ign,master.ign and worker.ign files\n# Ignition files are used for RCHCOS installation(similar to kickstart for RHEL)\nopenshift-install create ignition-configs\n\n## Embed DNS config and DHCP nameserver bypass options in ignition files\n#NAMESERVER_DETAILS=$(echo \"nameserver @@{address}@@\" | base64 -w0)\n#DHCP_DNS_STATE=$(echo \"[main]\n#dns=none\" | base64 -w0)\n#echo \"bootstrap.ign\n#master.ign\n#worker.ign\"| while read i; do\n#j=${i%.*}\n##Check if self-deployed DNS must be patched into Iginition Files\n#\tjq '.storage.files += [{\"path\":\"\/etc\/resolv.conf\",\"mode\":644,\"contents\":{\"source\":\"data:text\/plain;charset=utf-8;base64,'${NAMESERVER_DETAILS}'\"}}, {\"path\":\"\/etc\/NetworkManager\/conf.d\/90-dns-none.conf\",\"mode\":644,\"contents\":{\"source\":\"data:text\/plain;charset=utf-8;base64,'${DHCP_DNS_STATE}'\"}}] | .systemd.units +=[{\"name\": \"iscsid.service\",\"enabled\": true}]' ${i} > patched_${j}.ign\n#done\n\n#sudo cp patched_*.ign \/var\/www\/html\/openshift\nsudo cp *.ign \/var\/www\/html\/openshift\nsudo chmod 775 \/var\/www\/html\/openshift\/*\n\necho 'export KUBECONFIG=~\/openshift\/auth\/kubeconfig' >> .bash_profile","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"LB_DNS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Status","attrs":{"exit_status":[],"script":"print 'ST=@@{OPENSHIFT_SUBDOMAIN}@@'","eval_variables":["ST"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"LB_DNS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Get Auth","attrs":{"exit_status":[],"script":"echo \"AUTH=$(cat openshift\/auth\/kubeadmin-password)\"","eval_variables":["AUTH"],"eval_scope":"local","type":"","script_type":"sh"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]}],"description":"","name":"39671816_runbook","main_task_local_reference":{"kind":"app_task","name":"a68d3d79_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Openshift LB DNS Setup"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ee7f5a7a_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"2ca5fd92_runbook","main_task_local_reference":{"kind":"app_task","name":"ee7f5a7a_dag"},"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"OS_Status_Check"}],"name":"Check Openshift status","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Check Openshift status"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Prepare Openshift Install"},{"kind":"app_task","name":"OCP_STATUS Status"},{"kind":"app_task","name":"Remove Bootstrap from LoadBalancer"},{"kind":"app_task","name":"AutoAproval CSR"},{"kind":"app_task","name":"Finish Openshift Install"}],"name":"5607dede_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"AutoAproval CSR"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Finish Openshift Install"}},{"from_task_reference":{"kind":"app_task","name":"Remove Bootstrap from LoadBalancer"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"AutoAproval CSR"}},{"from_task_reference":{"kind":"app_task","name":"Prepare Openshift Install"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"OCP_STATUS Status"}},{"from_task_reference":{"kind":"app_task","name":"OCP_STATUS Status"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Remove Bootstrap from LoadBalancer"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"OS_Status_Check"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Prepare Openshift Install","attrs":{"script":"#!\/bin\/bash -e\n# Use macro from master set var task to delay task execution\n\ncd openshift\n# Wait for bootstrap completion\nsudo openshift-install wait-for bootstrap-complete --log-level debug","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"OS_Status_Check"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"OCP_STATUS Status","attrs":{"exit_status":[],"script":"print \"OCP_STATUS=bootstrap finished\"","eval_variables":["OCP_STATUS"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"OS_Status_Check"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Remove Bootstrap from LoadBalancer","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"a9b5306a_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"OS_Status_Check"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"AutoAproval CSR","attrs":{"script":"export KUBECONFIG=~\/openshift\/auth\/kubeconfig\n\necho \"\"\"export KUBECONFIG=~\/openshift\/auth\/kubeconfig\n~\/openshift\/oc get csr -oname | xargs ~\/openshift\/oc adm certificate approve\"\"\" > openshift\/csrjob.sh\nchmod +x openshift\/csrjob.sh\n\n(crontab -l; echo \"* * * * * \/home\/core\/openshift\/csrjob.sh\")|awk '!x[$0]++'|crontab -","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"OS_Status_Check"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Finish Openshift Install","attrs":{"script":"cd openshift\n# Wait for openshift installation to complete\nsudo openshift-install wait-for install-complete --log-level debug","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"e460ecb2_runbook","main_task_local_reference":{"kind":"app_task","name":"5607dede_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Check Openshift status"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"3200b001_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"8eff546d_runbook","main_task_local_reference":{"kind":"app_task","name":"3200b001_dag"},"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Worker"}],"name":"OS Installation_cloned_0","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"OS Installation_cloned_0"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Create DNS Entry"},{"kind":"app_task","name":"Register Worker into LoadBalancer"},{"kind":"app_task","name":"Status"}],"name":"a3bc4919_dag_cloned_1","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Create DNS Entry"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Register Worker into LoadBalancer"}},{"from_task_reference":{"kind":"app_task","name":"Register Worker into LoadBalancer"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Status"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Create DNS Entry","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"57e200d4_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Register Worker into LoadBalancer","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"bd1a1b17_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Worker"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Status","attrs":{"exit_status":[],"script":"print \"WORKER_STATUS=Done\"","eval_variables":["WORKER_STATUS"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]}],"description":"","name":"e4f956ad_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"a3bc4919_dag_cloned_1"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"OS Installation_cloned_0"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"22442950_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"3cae7b50_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"22442950_dag_cloned_1"},"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"SUBSTRATE_IMAGE","service_local_reference_list":[],"name":"rhcos","version":"","options":{"type":"","name":"rhcos","resources":{"image_type":"DISK_IMAGE","checksum":{"checksum_algorithm":"","type":"","checksum_value":""},"source_uri":"http:\/\/10.42.194.11\/users\/Huse\/4.9.15\/rhcos-49.84.202110081407-0-openstack.x86_64.qcow2","version":{"product_version":"","type":"","product_name":""},"architecture":"X86_64","type":""},"description":""},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"name":"decb8265_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"Setup"}],"substrate_local_reference":{"kind":"app_substrate","name":"bootstrap"},"variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"name":"9df14f84_deployment","min_replicas":"3","default_replicas":"3","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"3","package_local_reference_list":[{"kind":"app_package","name":"OS Installation"}],"substrate_local_reference":{"kind":"app_substrate","name":"master"},"variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"name":"8ff9c0f1_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"Openshift LB DNS Setup"}],"substrate_local_reference":{"kind":"app_substrate","name":"lb_dns"},"variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"name":"d9d0f80c_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"Check Openshift status"}],"substrate_local_reference":{"kind":"app_substrate","name":"Prov_Check"},"variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"name":"4aff8c30_deployment","min_replicas":"2","default_replicas":"@@{WORKER}@@","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"20","package_local_reference_list":[{"kind":"app_package","name":"OS Installation_cloned_0"}],"substrate_local_reference":{"kind":"app_substrate","name":"worker"},"variable_list":[],"description":""}],"environment_reference_list":[],"patch_list":[],"description":"","action_list":[{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Deploy CSI Driver"}],"name":"425a1dab_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"OS_Status_Check"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Deploy CSI Driver","attrs":{"exit_status":[],"script":"export KUBECONFIG=~\/openshift\/auth\/kubeconfig\necho \"\"\"apiVersion: v1\nkind: Secret\nmetadata:\n  name: ntnx-secret\n  namespace: ntnx-system\nstringData:\n  key: @@{PE_IP}@@:9440:@@{PE_ADMIN}@@:@@{PE_PW}@@\"\"\" > ntnx-secret.yaml\necho \"\"\"apiVersion: operators.coreos.com\/v1\nkind: OperatorGroup\nmetadata:\n  name: ntnx-system-r8czl\n  namespace: ntnx-system\nspec:\n  targetNamespaces:\n  - ntnx-system\"\"\" > operatorgroup.yaml\necho \"\"\"apiVersion: operators.coreos.com\/v1alpha1\nkind: Subscription\nmetadata:\n  name: nutanixcsioperator\n  namespace: ntnx-system\nspec:\n  channel: beta\n  name: nutanixcsioperator\n  installPlanApproval: Automatic\n  source: certified-operators\n  sourceNamespace: openshift-marketplace\"\"\" > subscription.yaml\necho \"\"\"apiVersion: crd.nutanix.com\/v1alpha1\nkind: NutanixCsiStorage\nmetadata:\n  name: nutanixcsistorage\n  namespace: ntnx-system\nspec:\n  namespace: ntnx-system\"\"\" > instance.yaml\n  \noc create ns ntnx-system\noc create -f ntnx-secret.yaml\noc create -f operatorgroup.yaml\noc create -f subscription.yaml\n\nATTEMPTS=0\nROLLOUT_STATUS_CMD=\"oc wait --for=condition=available --timeout=120s -n ntnx-system deployments nutanix-csi-operator-controller-manager\"\nuntil $ROLLOUT_STATUS_CMD || [ $ATTEMPTS -eq 12 ]; do\n  $ROLLOUT_STATUS_CMD\n  ATTEMPTS=$((attempts + 1))\n  sleep 10\ndone\n\n# Check deployment rollout status every 10 seconds (max 2 minutes) until complete.\nATTEMPTS=0\nROLLOUT_STATUS_CMD=\"oc get NutanixCsiStorage -n ntnx-system\"\nuntil $ROLLOUT_STATUS_CMD || [ $ATTEMPTS -eq 12 ]; do\n  $ROLLOUT_STATUS_CMD\n  ATTEMPTS=$((attempts + 1))\n  sleep 10\ndone\n\noc create -f instance.yaml","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CRED"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"87f0cf03_runbook","main_task_local_reference":{"kind":"app_task","name":"425a1dab_dag"},"variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"SECRET","name":"PE_PW","value":"","label":"","attrs":{"is_secret_modified":false,"secret_reference":{},"type":"SECRET"},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"PE_ADMIN","value":"admin","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"PE_IP","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}]},"name":"Deploy CSI"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Enable Image Registry"}],"name":"0be64741_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"OS_Status_Check"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Enable Image Registry","attrs":{"exit_status":[],"script":"export KUBECONFIG=~\/openshift\/auth\/kubeconfig\necho \"\"\"apiVersion: storage.k8s.io\/v1\nkind: StorageClass\nmetadata:\n  name: nutanix-volume\nprovisioner: csi.nutanix.com\nparameters:\n  csi.storage.k8s.io\/provisioner-secret-name: ntnx-secret\n  csi.storage.k8s.io\/provisioner-secret-namespace: ntnx-system\n  csi.storage.k8s.io\/node-publish-secret-name: ntnx-secret\n  csi.storage.k8s.io\/node-publish-secret-namespace: ntnx-system\n  csi.storage.k8s.io\/controller-expand-secret-name: ntnx-secret\n  csi.storage.k8s.io\/controller-expand-secret-namespace: ntnx-system\n  csi.storage.k8s.io\/fstype: ext4\n  dataServiceEndPoint: @@{DS_IP}@@:3260\n  storageContainer: @@{PE_CONTAINER}@@\n  storageType: NutanixVolumes\n  #whitelistIPMode: ENABLED\n  #chapAuth: ENABLED\nallowVolumeExpansion: true\nreclaimPolicy: Delete\"\"\" > storageclass.yaml\necho \"\"\"kind: PersistentVolumeClaim\napiVersion: v1\nmetadata:\n  name: image-registry-claim\n  namespace: openshift-image-registry\nspec:\n  accessModes:\n  - ReadWriteOnce\n  resources:\n    requests:\n      storage: 100Gi\n  storageClassName: nutanix-volume\"\"\" > pvc.yaml\n\noc create -f storageclass.yaml\noc create -f pvc.yaml\n\n# Patch OC Image Registry to use created PVC\noc patch configs.imageregistry.operator.openshift.io cluster --type merge --patch '{\"spec\":{\"managementState\":\"Managed\",\"storage\":{\"pvc\":{\"claim\":\"image-registry-claim\"}},\"rolloutStrategy\": \"Recreate\"}}'\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CRED"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"0843e467_runbook","main_task_local_reference":{"kind":"app_task","name":"0be64741_dag"},"variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"DS_IP","value":"10.38.15.136","label":"DataServiceIP","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"PE_CONTAINER","value":"Default","label":"Storage Container","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}]},"name":"Enable Image Registry"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Scale Out Worker"}],"name":"55a70022_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"4aff8c30_deployment"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Scale Out Worker","attrs":{"scaling_count":"@@{SCALEOUT_WORKER}@@","type":"","scaling_type":"SCALEOUT"},"timeout_secs":"0","type":"SCALING","variable_list":[]}],"description":"","name":"1fd3a13a_runbook","main_task_local_reference":{"kind":"app_task","name":"55a70022_dag"},"variable_list":[{"regex":{"should_validate":false,"value":"^[\\d]*$"},"val_type":"INT","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"SCALEOUT_WORKER","value":"","label":"Scale out number of Workers","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}]},"name":"Scale Out"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Scale In"}],"name":"5cdabf34_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_blueprint_deployment","name":"4aff8c30_deployment"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Scale In","attrs":{"scaling_count":"@@{SCALEIN_WORKER}@@","type":"","scaling_type":"SCALEIN"},"timeout_secs":"0","type":"SCALING","variable_list":[]}],"description":"","name":"da7a7a68_runbook","main_task_local_reference":{"kind":"app_task","name":"5cdabf34_dag"},"variable_list":[{"regex":{"should_validate":false,"value":"^[\\d]*$"},"val_type":"INT","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"SCALEIN_WORKER","value":"1","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}]},"name":"Scale In"}],"name":"Nutanix","restore_config_list":[],"snapshot_config_list":[],"variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"WORKER","value":"2","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"OPENSHIFT_INSTALL_LINUX","value":"https:\/\/mirror.openshift.com\/pub\/openshift-v4\/x86_64\/clients\/ocp\/latest-4.9\/openshift-install-linux.tar.gz","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"OPENSHIFT_CLIENT_LINUX","value":"https:\/\/mirror.openshift.com\/pub\/openshift-v4\/x86_64\/clients\/ocp\/latest-4.9\/openshift-client-linux.tar.gz","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"OCP_SERVICE_NETWORK","value":"172.30.0.0\/16","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"OCP_CLUSTER_NETWORK","value":"10.128.0.0\/14","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"OCP_CLUSTER_HOSTPREFIX","value":"23","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":true,"description":"Fetch your personal pull secret from your RedHat Console with valid OCP Subscription.","data_type":"BASE","type":"LOCAL","name":"OCP_PULL_SECRET","value":"","label":"Pull Secret","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"Syntax: a.b.c.d\/sn\nThis is the IP-Network your VMs are  running in.","data_type":"BASE","type":"LOCAL","name":"OCP_MACHINE_NETWORK","value":"","label":"Machine Network","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":true,"description":"This IP adress is used for the Bastion VM which runs HAProxy and dnsmasq. Your DNS must forward all DNS-Requests for the Subdomain to this IP (NS-Record or DNS-Delegation)","data_type":"BASE","type":"LOCAL","name":"BASTION_IP","value":"","label":"Bastion IP","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":true,"description":"This is the Base Domain of your DNS.","data_type":"BASE","type":"LOCAL","name":"BASE_DOMAIN","value":"","label":"Base Domain","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":true,"description":"Please configure the Sub Domain which Openshift should use for its installation. This Subdomain must be configured in your DNS before running the Blueprint","data_type":"BASE","type":"LOCAL","name":"OPENSHIFT_SUBDOMAIN","value":"","label":"Openshift Subdomain","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}]}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"CRED"},"type":"USER"},"name":"OCP-v2"},"api_version":"3.0","metadata":{"last_update_time":"1643632198753482","kind":"blueprint","spec_version":14,"creation_time":"1643620102308342","name":"OCP-v2"}}